# Load Test

## Single server & client

`Kestrel` and `NodeJs` compaired.

Use `Jmeter` tool.

**Environment**

* Server
    * CPU: i7 8 thread
    * Network: 100Mbps
    * window7
* Client
    * CPU: i7 8 thread
    * Network: 100Mbps
    * window7

**Setting**

* request count/user: 50,000


**Kestrel Result**

| user count | avg(ms) | avg50 | avg90 | avg95 | avg99 | min | max | error | qps/sec | kb/sec | max cpu(%) |  memory(M) | network(M) |
|:----|----:|------:|------:|------:|------:|----:|----:|------:|----:|-------:|----:|-------:|--------:|
| 500 | 3 | 2 | 6 | 11 | 18 | 0 | 998 | 0 | 31,484.0 | 3,628.0 | 30 | 120/180 | 90 |
| 1,000 | 11 | 6 | 29 | 37 | 50 | 0 | 652 | 0 | 27,235.8 | 3,138.5 | 30 | 130/180 | 80 |
| 2,000 | 90 | 61 | 128 | 334 | 897 | 0 | 113,462 | 0 | 16,799.6 | 1,935.9 | 30 | 140/180 | 30-60 |
| 2,500 | 149 | 70 | 376 | 478 | 1,243 | 0 | 253,287 | 0 | 14,106.6 | 1,625.6 | 30 | 100/107 | 30-60 |


**NodeJs Result**

| user count | avg(ms) | avg50 | avg90 | avg95 | avg99 | min | max | error | qps/sec | kb/sec | max cpu(%) | memory(M) | network(M) |
|:----|----:|------:|------:|------:|------:|----:|----:|------:|----:|-------:|----:|-------:|--------:|
| 500 | 2 | 1 | 12 | 17 | 22 | 0 | 262 | 0 | 29,535.9 | 3,057.5 | 30 | 71/156 | 90 |
| 1,000 | 25 | 25 | 44 | 47 | 61 | 0 | 444 | 0 | 25,005.8 | 2,588.5 | 30 | 77/156 | 80 |
| 2,000 | 99 | 95 | 144 | 162 | 363 | 0 | 8,106 | 0 | 17,027.2 | 1,762.6 | 30 | 90/156 | 60 |
| 2,500 | 142 | 71 | 312 | 471 | 1,159 | 0 | 120,272 | 4.4 | 14,330.0 | 1,483.4 | 30 | 90/156 | 60 |


**dotNet4.6(httpListener) Result**

| user count | avg(ms) | avg50 | avg90 | avg95 | avg99 | min | max | error | qps/sec | kb/sec | max cpu(%) |  memory(M) | network(M) |
|:----|----:|------:|------:|------:|------:|----:|----:|------:|----:|-------:|----:|-------:|--------:|
| 500 | 1 | 1 | 2 | 7 | 19 | 0 | 4,05 | 0 | 27,054.7 | 4,438.7 | 40 | 30/30 | 70-90 |
| 1,000 | 4 | 1 | 5 | 15 | 54 | 0 | 1,016 | 0 | 25,216.9 | 4,137.2 | 60 | 30/30 | 70-90 |
| 2,000 | 5 | 1 | 6 | 16 | 60 | 0 | 24345 | 0.01 | 25,229.7 | 4,154.3 | 60 | 30/30 | 70-90 |
| 2,500 |  |  |  |  |  | 0 | - | - |  | - | 0.11 | - | - |

warn: users:2,500 has fail thread, only 1000 thread run.
